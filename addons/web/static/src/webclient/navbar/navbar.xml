<?xml version="1.0" encoding="UTF-8" ?>
<templates xml:space="preserve">

  <t t-name="web.NavBar">
    <header class="o_navbar" t-ref="root">
      <nav
        class="o_main_navbar"
        data-command-category="disabled"
      >
      <img src="data:image/png;base64,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" alt="Taknet Logot" />
      <!-- Apps Menu -->
        <t t-call="web.NavBar.AppsMenu">
          <t t-set="apps" t-value="menuService.getApps()" />
        </t>

        <!-- App Brand -->
        <DropdownItem
          t-if="currentApp"
          href="getMenuItemHref(currentApp)"
          t-esc="currentApp.name"
          class="'o_menu_brand d-none d-md-flex'"
          dataset="{ menuXmlid: currentApp.xmlid, section: currentApp.id }"
          onSelected="() => this.onNavBarDropdownItemSelection(currentApp)"
        />

        <!-- Current App Sections -->
        <t t-if="currentAppSections.length" t-call="web.NavBar.SectionsMenu">
          <t t-set="sections" t-value="currentAppSections" />
        </t>

        <!-- Systray -->
        <div class="o_menu_systray d-flex flex-shrink-0 ms-auto" role="menu">
          <t t-foreach="systrayItems" t-as="item" t-key="item.key">
            <!-- This ensures the correct order of the systray items -->
            <div t-att-data-index="item.index"/>
            <ErrorHandler onError="error => this.handleItemError(error, item)">
                <t t-component="item.Component" t-props="item.props"/>
            </ErrorHandler>
          </t>
        </div>
      </nav>
    </header>
  </t>

  <t t-name="web.NavBar.AppsMenu">
    <Dropdown hotkey="'h'" title="'Home Menu'" class="'o_navbar_apps_menu'">
      <t t-set-slot="toggler">
        <i class="oi oi-apps" />
      </t>
      <DropdownItem
        t-foreach="apps"
        t-as="app"
        t-key="app.id"
        class="{ 'o_app': true, focus: menuService.getCurrentApp() === app }"
        href="getMenuItemHref(app)"
        t-esc="app.name"
        dataset="{ menuXmlid: app.xmlid, section: app.id }"
        onSelected="() => this.onNavBarDropdownItemSelection(app)"
      />
    </Dropdown>
  </t>

  <t t-name="web.NavBar.SectionsMenu">
    <div class="o_menu_sections d-none d-md-flex flex-grow-1 flex-shrink-1 w-0" t-ref="appSubMenus" role="menu">

      <t t-foreach="sections" t-as="section" t-key="section.id">
        <t
          t-set="sectionsVisibleCount"
          t-value="(sections.length - currentAppSectionsExtra.length)"
        />

        <t t-if="section_index lt Math.min(10, sectionsVisibleCount)">
          <t t-set="hotkey" t-value="((section_index + 1) % 10).toString()" />
        </t>
        <t t-else="">
          <t t-set="hotkey" t-value="undefined" />
        </t>

        <t t-if="!section.childrenTree.length">
          <DropdownItem
            class="'o_nav_entry'"
            href="getMenuItemHref(section)"
            hotkey="hotkey"
            t-esc="section.name"
            dataset="{ menuXmlid: section.xmlid, section: section.id }"
            onSelected="() => this.onNavBarDropdownItemSelection(section)"
          />
        </t>
        <t t-else="">
          <MenuDropdown
            hotkey="hotkey"
            xmlid="section.xmlid"
          >
            <t t-set-slot="toggler">
              <span t-esc="section.name" t-att-data-section="section.id" />
            </t>
            <t t-call="web.NavBar.SectionsMenu.Dropdown.MenuSlot">
              <t t-set="items" t-value="section.childrenTree" />
              <t t-set="decalage" t-value="20" />
            </t>
          </MenuDropdown>
        </t>
      </t>

      <t t-if="currentAppSectionsExtra.length" t-call="web.NavBar.SectionsMenu.MoreDropdown">
        <t t-set="sections" t-value="currentAppSectionsExtra" />
        <t t-if="sectionsVisibleCount lt 10">
          <t t-set="hotkey" t-value="(sectionsVisibleCount + 1 % 10).toString()" />
        </t>
      </t>

    </div>
  </t>

  <t t-name="web.NavBar.DropdownItem" t-inherit="web.DropdownItem" t-inherit-mode="primary">
    <xpath expr="//t[@t-tag]" position="attributes">
      <attribute name="t-att-style">props.style</attribute>
    </xpath>
  </t>

  <t t-name="web.NavBar.SectionsMenu.Dropdown.MenuSlot">
    <t t-set="style" t-value="`padding-left: ${decalage}px;`" />
    <t t-foreach="items" t-as="item" t-key="item.id">
      <DropdownItem
        t-if="!item.childrenTree.length"
        href="getMenuItemHref(item)"
        class="{
          'dropdown-item': true,
          o_dropdown_menu_group_entry: decalage gt 20
        }"
        style="style"
        t-esc="item.name"
        dataset="{ menuXmlid: item.xmlid, section: item.id }"
        onSelected="() => this.onNavBarDropdownItemSelection(item)"
      />

      <t t-else="">
        <div class="dropdown-menu_group dropdown-header" t-att-style="style" t-esc="item.name" />
        <t t-call="web.NavBar.SectionsMenu.Dropdown.MenuSlot">
          <t t-set="items" t-value="item.childrenTree" />
          <t t-set="decalage" t-value="decalage + 12" />
        </t>
      </t>
    </t>
  </t>

  <t t-name="web.NavBar.SectionsMenu.MoreDropdown">
    <Dropdown class="'o_menu_sections_more'" title="'More Menu'" hotkey="hotkey">
      <t t-set-slot="toggler">
        <i class="fa fa-plus"/>
      </t>
      <t t-foreach="sections" t-as="section" t-key="section.id">

        <t t-if="!section.childrenTree.length">
          <DropdownItem
            class="'o_more_dropdown_section'"
            href="getMenuItemHref(section)"
            t-esc="section.name"
            dataset="{ menuXmlid: section.xmlid, section: section.id }"
            onSelected="() => this.onNavBarDropdownItemSelection(section)"
          />
        </t>
        <t t-else="">
          <div
            class="o_more_dropdown_section o_more_dropdown_section_group dropdown-header bg-100"
            t-esc="section.name"
          />
          <t t-call="web.NavBar.SectionsMenu.Dropdown.MenuSlot">
            <t t-set="items" t-value="section.childrenTree" />
            <t t-set="decalage" t-value="20" />
          </t>
        </t>
      </t>
    </Dropdown>
  </t>

</templates>
